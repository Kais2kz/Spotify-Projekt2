<!doctype html>
<html>
  <head>
    <title>Example of the Authorization Code flow with Spotify</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <style type="text/css">
      #login, #loggedin {
        display: none;
      }
      .text-overflow {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 500px;
      }
    </style>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="css/bootstrp-grid.css">
    <link rel="stylesheet" href="css/bootstrp-grid.css.map">
    <link rel="stylesheet" href="css/bootstrp-grid.min.css">
    <link rel="stylesheet" href="css/bootstrp-grid.min.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css.map">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap.css.map">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css.map">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Bootstrap</title>

  </head>

  <body>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- Main JS -->
    <script src="js/main.js"></script>


    <div class="jumbotron text-center" style="margin: 0; background: black; Color: white;">   <!-- Jumbotron from Bootstrap.css -->
      <img class="img-fluid mx-auto d-block" src="https://www.freepnglogos.com/uploads/spotify-logo-png/spotify-icon-marilyn-scott-0.png" style="width: auto; height: 150px;" alt="">
      <h1> Spotify </h1>
      <p> Stats </p>
    </div>

    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">   <!-- Bootstrap Navbar, klasser från Css länkar-->
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="IYRTITL.html">Songs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="DS2.html">Artists</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Kontakt.html">Playlists</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Om.html">About</a>
          </li>
        </ul>
      </div>

    </nav>


    <div id="carouselExampleIndicators" class="carousel slide mx-auto" data-ride="carousel">    <!-- Carousel från Bootstrap, visar bilder som man kan scrolla igenom-->
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner w-75 mx-auto rounded">
        <div class="carousel-item active">
          <img class="d-block w-100" src="https://routenote.com/blog/wp-content/uploads/2018/08/Spotify-for-Artists.png" alt="First slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="https://developer.spotify.com/assets/playlistview.png" alt="">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="https://images.techhive.com/images/article/2017/02/6-gotta-know-spotify-tips-for-ios-and-android-offline-radio-for-ios_1-100708856-orig.jpg" alt="Second slide">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>



    <div class="container" style="margin-top:30px">   <!-- Container som innehåller Kolumner med bilder -->
    <div class="row">
    <div class="col-sm-4">
      <h2>About</h2>
      <h5>Create your own Charts</h5>
      <img class="img-fluid d-block" src="https://www.statsforspotify.com/img/list-numbered.b5990c6f.svg" style="width: auto; height: 300px;" alt="">
      <p> View your most listened tracks and artists and switch between 3 different time periods. Your data is updated approximately every day.
          Like What a Time to Be Alive is a collaborative mixtape by rappers Drake and Future, released on September 20, 2015.
          The project was produced in large part by Metro Boomin. Metro’s production sparked the now famous Future line (which first appeared on “Jumpman”): “If Young Metro don’t trust you I’m gone' shoot you.”
      </p>
      <hr class="d-sm-none">
    </div>


    <div class="col-sm-8">    <!-- Kolumn 8 vilket är i mitten med all info om Album -->

      <div class="container">
        <div id="login">
          <h1>Get Started</h1>
          <a href="/login" class="btn btn-primary">Log in with Spotify</a>
        </div>
        <div id="loggedin">
          <div id="user-profile">
          </div>
          <div id="oauth">
          </div>
          <button class="btn btn-default" id="obtain-new-token">Obtain new token using the refresh token</button>
        </div>
      </div>

      <br>

      <h2>Create a Playlist from your favorite songs</h2>
      <img class="img-fluid d-block" src="https://www.statsforspotify.com/img/save.a85d4bf5.svg" style="width: auto; height: 150px;" alt="">
      <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      </p>
      <br>
      <h2>See what artists you have listened to</h2>
      <img class="img-fluid d-block" src="https://www.statsforspotify.com/img/replay.acc40335.svg" style="width: auto; height: 150px;" alt="">
      <p>Some text..</p>
      <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      </p>
    </div>
  </div>
</div>

  <div class="jumbotron text-center" style="margin-bottom:0; background: black; Color: white;">   <!-- Jumbotron Footer innehåller Sociala Medier Ikoner -->
    <a href="https://www.facebook.com/SpotifySverige/" class="fa fa-facebook" style="color: lightblue; font-size: 50px; margin-right: 150px;"></a>   <!--Bootstrap Sociala Medier Ikoner-->
    <a href="https://twitter.com/spotify" class="fa fa-twitter" style="color: lightblue; font-size: 50px;  margin-right: 150px;"></a>
    <a href="https://www.spotify.com/se/" class="fa fa-google" style="color: lightblue; font-size: 50px;  margin-right: 150px;"></a>
    <a href="https://www.youtube.com/channel/UCRMqQWxCWE0VMvtUElm-rEA" class="fa fa-youtube" style="color: lightblue; font-size: 50px;  margin-right: 150px;"></a>
    <a href="https://www.instagram.com/spotifysweden/?hl=sv" class="fa fa-instagram" style="color: lightblue; font-size: 50px;"></a>
  </div>


    <script id="user-profile-template" type="text/x-handlebars-template">
      <h1>Logged in as {{display_name}}</h1>
      <div class="media">
        <div class="pull-left">
          <img class="media-object" width="150" src="{{images.0.url}}" />
        </div>
        <div class="media-body">
          <dl class="dl-horizontal">
            <dt>Display name</dt><dd class="clearfix">{{display_name}}</dd>
            <dt>Id</dt><dd>{{id}}</dd>
            <dt>Email</dt><dd>{{email}}</dd>
            <dt>Spotify URI</dt><dd><a href="{{external_urls.spotify}}">{{external_urls.spotify}}</a></dd>
            <dt>Link</dt><dd><a href="{{href}}">{{href}}</a></dd>
            <dt>Profile Image</dt><dd class="clearfix"><a href="{{images.0.url}}">{{images.0.url}}</a></dd>
            <dt>Country</dt><dd>{{country}}</dd>
          </dl>
        </div>
      </div>
    </script>

    <script id="oauth-template" type="text/x-handlebars-template">
      <h2>oAuth info</h2>
      <dl class="dl-horizontal">
        <dt>Access token</dt><dd class="text-overflow">{{access_token}}</dd>
        <dt>Refresh token</dt><dd class="text-overflow">{{refresh_token}}</dd>
      </dl>
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script>
      (function() {

        /**
         * Obtains parameters from the hash of the URL
         * @return Object
         */
        function getHashParams() {
          var hashParams = {};
          var e, r = /([^&;=]+)=?([^&;]*)/g,
              q = window.location.hash.substring(1);
          while ( e = r.exec(q)) {
             hashParams[e[1]] = decodeURIComponent(e[2]);
          }
          return hashParams;
        }

        var userProfileSource = document.getElementById('user-profile-template').innerHTML,
            userProfileTemplate = Handlebars.compile(userProfileSource),
            userProfilePlaceholder = document.getElementById('user-profile');

        var oauthSource = document.getElementById('oauth-template').innerHTML,
            oauthTemplate = Handlebars.compile(oauthSource),
            oauthPlaceholder = document.getElementById('oauth');

        var params = getHashParams();

        var access_token = params.access_token,
            refresh_token = params.refresh_token,
            error = params.error;

        if (error) {
          alert('There was an error during the authentication');
        } else {
          if (access_token) {
            // render oauth info
            oauthPlaceholder.innerHTML = oauthTemplate({
              access_token: access_token,
              refresh_token: refresh_token
            });

            $.ajax({
                url: 'https://api.spotify.com/v1/me',
                headers: {
                  'Authorization': 'Bearer ' + access_token
                },
                success: function(response) {
                  userProfilePlaceholder.innerHTML = userProfileTemplate(response);

                  $('#login').hide();
                  $('#loggedin').show();
                }
            });
          } else {
              // render initial screen
              $('#login').show();
              $('#loggedin').hide();
          }

          document.getElementById('obtain-new-token').addEventListener('click', function() {
            $.ajax({
              url: '/refresh_token',
              data: {
                'refresh_token': refresh_token
              }
            }).done(function(data) {
              access_token = data.access_token;
              oauthPlaceholder.innerHTML = oauthTemplate({
                access_token: access_token,
                refresh_token: refresh_token
              });
            });
          }, false);
        }
      })();
    </script>
  </body>
</html>
